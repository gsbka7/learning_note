import{_ as n,p as s,q as a,a1 as t}from"./framework-96b046e1.js";const e={},p=t(`<h1 id="_07-【-php-與-mysql-】" tabindex="-1"><a class="header-anchor" href="#_07-【-php-與-mysql-】" aria-hidden="true">#</a> 07 【 PHP 與 MySQL 】</h1><h2 id="_1-觀念與流程" tabindex="-1"><a class="header-anchor" href="#_1-觀念與流程" aria-hidden="true">#</a> 1. 觀念與流程</h2><h3 id="_1-開啟與關閉-mysql-資料庫連接" tabindex="-1"><a class="header-anchor" href="#_1-開啟與關閉-mysql-資料庫連接" aria-hidden="true">#</a> 1. 開啟與關閉 MySQL 資料庫連接</h3><h4 id="_1-建立-mysql-資料庫連接" tabindex="-1"><a class="header-anchor" href="#_1-建立-mysql-資料庫連接" aria-hidden="true">#</a> 1. 建立 MySQL 資料庫連接</h4><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code>    <span class="token function">mysqli_connect</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;伺服器位址&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;帳號&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;密碼&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;資料庫名稱&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_2-關閉-mysql-資料庫連接" tabindex="-1"><a class="header-anchor" href="#_2-關閉-mysql-資料庫連接" aria-hidden="true">#</a> 2. 關閉 MySQL 資料庫連接</h4><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code>    <span class="token function">mysqli_close</span><span class="token punctuation">(</span><span class="token variable">$dblink</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_3-連接失敗時顯示錯誤" tabindex="-1"><a class="header-anchor" href="#_3-連接失敗時顯示錯誤" aria-hidden="true">#</a> 3. 連接失敗時顯示錯誤</h4><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code>    <span class="token function">ini_set</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;dispaly_errors&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token constant">E_ALL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>正式上線時不建議使用，容易被利用理解錯誤訊息進而攻擊網站</p></div><h4 id="_4-範例" tabindex="-1"><a class="header-anchor" href="#_4-範例" aria-hidden="true">#</a> 4. 範例</h4><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token function">ini_set</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;dispaly_errors&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token constant">E_ALL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$db_link</span> <span class="token operator">=</span> <span class="token function">mysqli_connect</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;locatlhost&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;db&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$db_link</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;伺服器連接失敗&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;伺服器連接成功&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">mysqli_close</span><span class="token punctuation">(</span><span class="token variable">$dblink</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-操作資料庫" tabindex="-1"><a class="header-anchor" href="#_2-操作資料庫" aria-hidden="true">#</a> 2. 操作資料庫</h3><p>使用 <code>mysqli_query()</code>執行SQL指令，對資料庫進行新增、刪除、修改、查詢等操作</p><p>・ insert -- 新增</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token variable">$sql_query</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;INSERT INTO \`資料表名稱\` (&quot;</span>欄位<span class="token number">1</span><span class="token string double-quoted-string">&quot;, ...) VALUES (&quot;</span>值<span class="token number">1</span><span class="token string double-quoted-string">&quot;, ...)&quot;</span><span class="token punctuation">;</span>
    <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$dblink</span><span class="token punctuation">,</span> <span class="token variable">$qul_query</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>・ delete -- 刪除</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token variable">$sql_query</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;DELETE FROM \`資料表名稱\` WHERE 條件式&quot;</span><span class="token punctuation">;</span>
    <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$dblink</span><span class="token punctuation">,</span> <span class="token variable">$qul_query</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>・ update -- 修改</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token variable">$sql_query</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;UPDATE \`資料表名稱\` SET \`欄位1\` = \`值1\`, ... WHERE 條件式&quot;</span><span class="token punctuation">;</span>
    <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$dblink</span><span class="token punctuation">,</span> <span class="token variable">$qul_query</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>・ select -- 查詢</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token variable">$sql_query</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;SELECT * FROM \`資料表名稱\`&quot;</span><span class="token punctuation">;</span>
    <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$dblink</span><span class="token punctuation">,</span> <span class="token variable">$qul_query</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-取得資料表查詢結果" tabindex="-1"><a class="header-anchor" href="#_2-取得資料表查詢結果" aria-hidden="true">#</a> 2. 取得資料表查詢結果</h2><p>使用 mysqli_query() 執行 SELECT 指令後，可以使用取得結果函式來取得查詢結果</p><table><thead><tr><th style="text-align:center;">函式</th><th style="text-align:center;">說明</th></tr></thead><tbody><tr><td style="text-align:center;">mysqli_fetch_row()</td><td style="text-align:center;">一次可以取得一筆(列)資料，使用欄位序號取得欄位內容。欄位序號從 0 開始</td></tr><tr><td style="text-align:center;">mysqli_fetch_array()</td><td style="text-align:center;">一次可以取得一筆(列)資料，使用欄位序號或欄位名稱取得欄位內容。欄位序號從 0 開始</td></tr><tr><td style="text-align:center;">mysqli_fetch_assoc()</td><td style="text-align:center;">一次可以取得一筆(列)資料，使用欄位序號來取得欄位內容。欄位序號從 0 開始</td></tr></tbody></table><h2 id="_3-取得-sql-指令的執行狀態" tabindex="-1"><a class="header-anchor" href="#_3-取得-sql-指令的執行狀態" aria-hidden="true">#</a> 3. 取得 SQL 指令的執行狀態</h2><table><thead><tr><th style="text-align:center;">函式</th><th style="text-align:center;">說明</th></tr></thead><tbody><tr><td style="text-align:center;">mysqli_num_rows()</td><td style="text-align:center;">適用於 select 指令，會回傳返回列的數目</td></tr><tr><td style="text-align:center;">mysqli_num_fields()</td><td style="text-align:center;">適用於 select 指令，會回傳被篩選出來的欄位數目</td></tr><tr><td style="text-align:center;">mysqli_affected_rows_rows()</td><td style="text-align:center;">適用於 insert、delete 以及 update 指令，會回傳受到該址令影響的紀錄數目</td></tr></tbody></table><h3 id="_1-mysqli-num-rows" tabindex="-1"><a class="header-anchor" href="#_1-mysqli-num-rows" aria-hidden="true">#</a> 1. mysqli_num_rows()</h3><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code>    <span class="token function">mysqli_num_rows</span><span class="token punctuation">(</span>resource result<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-mysqli-num-fields" tabindex="-1"><a class="header-anchor" href="#_2-mysqli-num-fields" aria-hidden="true">#</a> 2. mysqli_num_fields()</h3><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token function">mysqli_num_fields</span><span class="token punctuation">(</span>resource result<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>範例：</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token variable">$db_link</span> <span class="token operator">=</span> <span class="token function">mysqli_connect</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;localhost&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;db&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$db_link</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;連接失敗&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;連接成功&quot;</span><span class="token punctuation">;</span>

        <span class="token variable">$sql_query</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;SELECT * FROM \`member\`&quot;</span><span class="token punctuation">;</span>
        <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$mysql_query</span><span class="token punctuation">(</span><span class="token variable">$db_link</span><span class="token punctuation">,</span> <span class="token variable">$sql_query</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;member 資料表有&quot;</span><span class="token operator">.</span><span class="token function">mysqli_num_rows</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;筆資料&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;，&quot;</span><span class="token operator">.</span><span class="token function">mysqli_num_fields</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;個欄位&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">mysqli_close</span><span class="token punctuation">(</span><span class="token variable">$db_link</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-mysqli-affected-rows-rows" tabindex="-1"><a class="header-anchor" href="#_3-mysqli-affected-rows-rows" aria-hidden="true">#</a> 3. mysqli_affected_rows_rows()</h3><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token function">mysqli_affected_rows_rows</span><span class="token punctuation">(</span><span class="token punctuation">[</span>resource link_identifier<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>範例：</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token variable">$db_link</span> <span class="token operator">=</span> <span class="token function">mysqli_connect</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;localhost&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;db&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$db_link</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;連接失敗&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;連接成功&quot;</span><span class="token punctuation">;</span>

        <span class="token variable">$sql_query</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;UPDATE \`member\` SET \`sex\` = \`female\` WHERE \`id\` &gt; 5 AND \`id\` &lt; 6&quot;</span><span class="token punctuation">;</span>

        <span class="token variable">$mysql_query</span><span class="token punctuation">(</span><span class="token variable">$db_link</span><span class="token punctuation">,</span> <span class="token variable">$sql_query</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;有&quot;</span><span class="token operator">.</span><span class="token function">mysqli_affected_rows_rows</span><span class="token punctuation">(</span><span class="token variable">$db_link</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;個資料受到 UPDATE 指令影響&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">mysqli_close</span><span class="token punctuation">(</span><span class="token variable">$db_link</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,37),o=[p];function l(i,c){return s(),a("div",null,o)}const r=n(e,[["render",l],["__file","07.html.vue"]]);export{r as default};
